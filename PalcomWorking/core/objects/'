class PalcomPinpad : public PalcomObject{
	private:
		static int numButtonSize = 0;
		static void numButtonHandler(lv_event_t* e){
			if(lv_event_get_code(e) == LV_EVENT_RELEASED){
				uint8_t *val = (uint8_t *)lv_event_get_user_data(e);
				fileData[numButtonSize] = (uint8_t)val;
				numButtonSize++;
				Serial.printf("passcode buffer size : %d\n", numButtonSize);
			}
		}

		void createNumButton(lv_obj_t *parent, String buttonText, int x, int y){
			PalcomLabel numLabel;
                        PalcomButton numButton;

                        numButton.create(parent);
                        numButton.setSize(20, 20);
                        style_pinpadButton.initStyle();
                        numButton.setDefaultStyle(style_pinpadButton.getStyle());
                        numButton.setPressedStyle(style_pinpadButton.getPressedStyle());
                        numButton.setAlignment(LV_ALIGN_OUT_TOP_LEFT, x, y);
			numButton.setValuedCallback(&numButtonHandler, (uint8_t *)buttonText.toInt());
                        numLabel.create(numButton.getObj());
                        numLabel.setText(buttonText.c_str());
                        numLabel.center();
                        numButton.setLabel(numLabel);
		}

	public:
		void create(lv_obj_t *parent, String title){
			this->generate(parent, pal_base);
			this->setSize(this->getHorizontalResolution(), this->getVirticalResolution());
			
			PalcomLabel titleLabel;
			titleLabel.create(parent);
			this->execute();
			titleLabel.setLongMode(LV_LABEL_LONG_SCROLL);
			titleLabel.setWidth(300);
			titleLabel.setAlignment(LV_ALIGN_TOP_MID, 100, 25);
			titleLabel.setText(title.c_str());
			Serial.printf("Title Text : %s\n", title.c_str());
			this->execute();
			
			int xPadding = 5;
			int yPadding = 60;
			this->createNumButton(parent, "1", 0+xPadding, 5+yPadding);
			this->createNumButton(parent, "2", 80+xPadding, 5+yPadding);
			this->createNumButton(parent, "3", 160+xPadding, 5+yPadding);
			this->createNumButton(parent, "4", 240+xPadding, 5+yPadding);

			this->createNumButton(parent, "5", 0+xPadding, 65+yPadding);
			this->createNumButton(parent, "6", 80+xPadding, 65+yPadding);
			this->createNumButton(parent, "7", 160+xPadding, 65+yPadding);
			this->createNumButton(parent, "8", 240+xPadding, 65+yPadding);

			this->createNumButton(parent, "9", 0+xPadding, 125+yPadding);
			this->createNumButton(parent, "0", 80+xPadding, 125+yPadding);
		}
};
